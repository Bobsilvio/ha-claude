<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Claude AI - Home Assistant</title>
    <link rel="stylesheet" href="{{ ingress_path }}/static/style.css">
</head>
<body>
    <div id="app">
        <!-- Header -->
        <header class="header">
            <div class="header-left">
                <div class="logo">ğŸ¤–</div>
                <div>
                    <h1>Claude AI</h1>
                    <span class="subtitle" id="model-info">Home Assistant Assistant</span>
                </div>
            </div>
            <div class="header-right">
                <button class="btn-icon" onclick="clearChat()" title="Nuova conversazione">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 5v14M5 12h14"/></svg>
                </button>
                <button class="btn-icon" onclick="showEntities()" title="Mostra entitÃ ">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
                </button>
            </div>
        </header>

        <!-- Chat Messages -->
        <div class="chat-container" id="chat-container">
            <div class="welcome-message" id="welcome">
                <div class="welcome-icon">ğŸ </div>
                <h2>Benvenuto in Claude AI</h2>
                <p>Chiedimi qualsiasi cosa sulla tua casa smart!</p>
                <div class="suggestions">
                    <button class="suggestion" onclick="sendSuggestion(this)">ğŸ’¡ Quali luci sono accese?</button>
                    <button class="suggestion" onclick="sendSuggestion(this)">ğŸŒ¡ï¸ Qual Ã¨ la temperatura in casa?</button>
                    <button class="suggestion" onclick="sendSuggestion(this)">âš¡ Crea un'automazione per le luci</button>
                    <button class="suggestion" onclick="sendSuggestion(this)">ğŸ“Š Mostra tutti i sensori</button>
                </div>
            </div>
        </div>

        <!-- Input Area -->
        <div class="input-area">
            <div class="input-wrapper">
                <textarea 
                    id="message-input" 
                    placeholder="Scrivi un messaggio..."
                    rows="1"
                    onkeydown="handleKeyDown(event)"
                    oninput="autoResize(this)"
                ></textarea>
                <button class="send-btn" id="send-btn" onclick="sendMessage()">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg>
                </button>
            </div>
        </div>
    </div>

    <!-- Entities Modal -->
    <div class="modal" id="entities-modal" onclick="closeModal(event)">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ  EntitÃ  Home Assistant</h2>
                <button class="btn-icon" onclick="document.getElementById('entities-modal').classList.remove('active')">âœ•</button>
            </div>
            <input type="text" class="search-input" id="entity-search" placeholder="Cerca entitÃ ..." oninput="filterEntities()">
            <div class="entity-list" id="entity-list">
                <p>Caricamento...</p>
            </div>
        </div>
    </div>

    <script>
        const INGRESS_PATH = "{{ ingress_path }}";
        const SESSION_ID = "session_" + Date.now();
    </script>
    <script src="{{ ingress_path }}/static/app.js"></script>
</body>
</html>
